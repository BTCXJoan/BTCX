<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>BTCX</title>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>

<body style="background:#0b0f1a;color:white;text-align:center;font-family:Arial;padding:40px;">

<h2>BTCX — Biblioteca Bitcoin</h2>

<p>Acceso mediante staking mínimo de 2.000 BTCX</p>

<button onclick="connect()">Conectar wallet</button>

<div id="status"></div>

<script>

const stakingAddress="0xFc9016F9153D0a7e9A09DDca7Ad756F9485cEcbc";

const stakingABI=[
 "function hasAccess(address user) view returns(bool)"
];

async function connect(){

 if(!window.ethereum){
   document.getElementById("status").innerHTML="MetaMask no detectado";
   return;
 }

 const provider=new ethers.providers.Web3Provider(window.ethereum);
 await provider.send("eth_requestAccounts",[]);
 const signer=provider.getSigner();
 const address=await signer.getAddress();

 const contract=new ethers.Contract(stakingAddress,stakingABI,provider);
 const access=await contract.hasAccess(address);

 if(access){
   document.getElementById("status").innerHTML=
   "Acceso activo ✔<br><br><a href='panel.html' style='color:white;'>Entrar al panel BTCX</a>";
 }else{
   document.getElementById("status").innerHTML=
   "Wallet conectada pero sin staking activo";
 }

}

</script>

</body>
</html>
